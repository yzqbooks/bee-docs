"use strict";(self.webpackChunkbee=self.webpackChunkbee||[]).push([[7995],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return d}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),m=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=m(e.components);return r.createElement(i.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=m(t),d=o,f=p["".concat(i,".").concat(d)]||p[d]||c[d]||a;return t?r.createElement(f,l(l({ref:n},s),{},{components:t})):r.createElement(f,l({ref:n},s))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=p;var u={};for(var i in n)hasOwnProperty.call(n,i)&&(u[i]=n[i]);u.originalType=e,u.mdxType="string"==typeof e?e:o,l[1]=u;for(var m=2;m<a;m++)l[m]=t[m];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},9607:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return u},metadata:function(){return m},toc:function(){return c}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),l=["components"],u={name:"\u6982\u8ff0",sort:1},i="\u6a21\u578b\uff08Models\uff09\uff0d beego ORM",m={unversionedId:"mvc/model/overview",id:"mvc/model/overview",title:"\u6a21\u578b\uff08Models\uff09\uff0d beego ORM",description:"beego ORM \u662f\u4e00\u4e2a\u5f3a\u5927\u7684 Go \u8bed\u8a00 ORM \u6846\u67b6\u3002\u5979\u7684\u7075\u611f\u4e3b\u8981\u6765\u81ea Django ORM \u548c SQLAlchemy\u3002",source:"@site/docs/mvc/model/overview.md",sourceDirName:"mvc/model",slug:"/mvc/model/overview",permalink:"/bee-docs/docs/mvc/model/overview",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mvc/model/overview.md",tags:[],version:"current",frontMatter:{name:"\u6982\u8ff0",sort:1},sidebar:"tutorialSidebar",previous:{title:"ORM \u4f7f\u7528\u65b9\u6cd5",permalink:"/bee-docs/docs/mvc/model/orm"},next:{title:"\u9ad8\u7ea7\u67e5\u8be2",permalink:"/bee-docs/docs/mvc/model/query"}},s={},c=[{value:"\u5feb\u901f\u5165\u95e8",id:"\u5feb\u901f\u5165\u95e8",level:2},{value:"\u7b80\u5355\u793a\u4f8b",id:"\u7b80\u5355\u793a\u4f8b",level:3},{value:"\u5173\u8054\u67e5\u8be2",id:"\u5173\u8054\u67e5\u8be2",level:3},{value:"SQL \u67e5\u8be2",id:"sql-\u67e5\u8be2",level:3},{value:"\u4e8b\u52a1\u5904\u7406",id:"\u4e8b\u52a1\u5904\u7406",level:3},{value:"\u8c03\u8bd5\u67e5\u8be2\u65e5\u5fd7",id:"\u8c03\u8bd5\u67e5\u8be2\u65e5\u5fd7",level:3}],p={toc:c};function d(e){var n=e.components,t=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u6a21\u578bmodels-beego-orm"},"\u6a21\u578b\uff08Models\uff09\uff0d beego ORM"),(0,a.kt)("p",null,"beego ORM \u662f\u4e00\u4e2a\u5f3a\u5927\u7684 Go \u8bed\u8a00 ORM \u6846\u67b6\u3002\u5979\u7684\u7075\u611f\u4e3b\u8981\u6765\u81ea Django ORM \u548c SQLAlchemy\u3002"),(0,a.kt)("p",null,"\u76ee\u524d\u8be5\u6846\u67b6\u4ecd\u5904\u4e8e\u5f00\u53d1\u9636\u6bb5\uff0c\u53ef\u80fd\u53d1\u751f\u4efb\u4f55\u5bfc\u81f4\u4e0d\u517c\u5bb9\u7684\u6539\u52a8\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5df2\u652f\u6301\u6570\u636e\u5e93\u9a71\u52a8\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"MySQL\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/go-sql-driver/mysql"},"github.com/go-sql-driver/mysql")),(0,a.kt)("li",{parentName:"ul"},"PostgreSQL\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/lib/pq"},"github.com/lib/pq")),(0,a.kt)("li",{parentName:"ul"},"Sqlite3\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mattn/go-sqlite3"},"github.com/mattn/go-sqlite3"))),(0,a.kt)("p",null,"\u4ee5\u4e0a\u6570\u636e\u5e93\u9a71\u52a8\u5747\u901a\u8fc7\u57fa\u672c\u6d4b\u8bd5\uff0c\u4f46\u6211\u4eec\u4ecd\u9700\u8981\u60a8\u7684\u53cd\u9988\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"ORM \u7279\u6027\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u652f\u6301 Go \u7684\u6240\u6709\u7c7b\u578b\u5b58\u50a8"),(0,a.kt)("li",{parentName:"ul"},"\u8f7b\u677e\u4e0a\u624b\uff0c\u91c7\u7528\u7b80\u5355\u7684 CRUD \u98ce\u683c"),(0,a.kt)("li",{parentName:"ul"},"\u81ea\u52a8 Join \u5173\u8054\u8868"),(0,a.kt)("li",{parentName:"ul"},"\u8de8\u6570\u636e\u5e93\u517c\u5bb9\u67e5\u8be2"),(0,a.kt)("li",{parentName:"ul"},"\u5141\u8bb8\u76f4\u63a5\u4f7f\u7528 SQL \u67e5\u8be2\uff0f\u6620\u5c04"),(0,a.kt)("li",{parentName:"ul"},"\u4e25\u683c\u5b8c\u6574\u7684\u6d4b\u8bd5\u4fdd\u8bc1 ORM \u7684\u7a33\u5b9a\u4e0e\u5065\u58ee")),(0,a.kt)("p",null,"\u66f4\u591a\u7279\u6027\u8bf7\u5728\u6587\u6863\u4e2d\u81ea\u884c\u54c1\u8bfb\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5b89\u88c5 ORM\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"go get github.com/beego/beego/v2/client/orm\n")),(0,a.kt)("h2",{id:"\u5feb\u901f\u5165\u95e8"},"\u5feb\u901f\u5165\u95e8"),(0,a.kt)("h3",{id:"\u7b80\u5355\u793a\u4f8b"},"\u7b80\u5355\u793a\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/beego/beego/v2/client/orm"\n    _ "github.com/go-sql-driver/mysql" // import your used driver\n)\n\n// Model Struct\ntype User struct {\n    Id   int\n    Name string `orm:"size(100)"`\n}\n\nfunc init() {\n    // set default database\n    orm.RegisterDataBase("default", "mysql", "username:password@tcp(127.0.0.1:3306)/db_name?charset=utf8&loc=Local")\n\n    // register model\n    orm.RegisterModel(new(User))\n\n    // create table\n    orm.RunSyncdb("default", false, true)\n}\n\nfunc main() {\n    o := orm.NewOrm()\n\n    user := User{Name: "slene"}\n\n    // insert\n    id, err := o.Insert(&user)\n    fmt.Printf("ID: %d, ERR: %v\\n", id, err)\n\n    // update\n    user.Name = "astaxie"\n    num, err := o.Update(&user)\n    fmt.Printf("NUM: %d, ERR: %v\\n", num, err)\n\n    // read one\n    u := User{Id: user.Id}\n    err = o.Read(&u)\n    fmt.Printf("ERR: %v\\n", err)\n\n    // delete\n    num, err = o.Delete(&u)\n    fmt.Printf("NUM: %d, ERR: %v\\n", num, err)\n}\n')),(0,a.kt)("h3",{id:"\u5173\u8054\u67e5\u8be2"},"\u5173\u8054\u67e5\u8be2"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'type Post struct {\n    Id    int    `orm:"auto"`\n    Title string `orm:"size(100)"`\n    User  *User  `orm:"rel(fk)"`\n}\n\nvar posts []*Post\nqs := o.QueryTable("post")\nnum, err := qs.Filter("User__Name", "slene").All(&posts)\n')),(0,a.kt)("h3",{id:"sql-\u67e5\u8be2"},"SQL \u67e5\u8be2"),(0,a.kt)("p",null,"\u5f53\u60a8\u65e0\u6cd5\u4f7f\u7528 ORM \u6765\u8fbe\u5230\u60a8\u7684\u9700\u6c42\u65f6\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 SQL \u6765\u5b8c\u6210\u67e5\u8be2\uff0f\u6620\u5c04\u64cd\u4f5c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'var maps []orm.Params\nnum, err := o.Raw("SELECT * FROM user").Values(&maps)\nfor _,term := range maps{\n    fmt.Println(term["id"],":",term["name"])\n}\n')),(0,a.kt)("h3",{id:"\u4e8b\u52a1\u5904\u7406"},"\u4e8b\u52a1\u5904\u7406"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'o.Begin()\n...\nuser := User{Name: "slene"}\nid, err := o.Insert(&user)\nif err == nil {\n    o.Commit()\n} else {\n    o.Rollback()\n}\n')),(0,a.kt)("h3",{id:"\u8c03\u8bd5\u67e5\u8be2\u65e5\u5fd7"},"\u8c03\u8bd5\u67e5\u8be2\u65e5\u5fd7"),(0,a.kt)("p",null,"\u5728\u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u6765\u5f00\u542f\u67e5\u8be2\u8c03\u8bd5\u6a21\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"func main() {\n    orm.Debug = true\n...\n")),(0,a.kt)("p",null,"\u5f00\u542f\u540e\u5c06\u4f1a\u8f93\u51fa\u6240\u6709\u67e5\u8be2\u8bed\u53e5\uff0c\u5305\u62ec\u6267\u884c\u3001\u51c6\u5907\u3001\u4e8b\u52a1\u7b49\u3002"),(0,a.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"[ORM] - 2013-08-09 13:18:16 - [Queries/default] - [    db.Exec /     0.4ms] -   [INSERT INTO `user` (`name`) VALUES (?)] - `slene`\n...\n")),(0,a.kt)("p",null,"\u6ce8\u610f\uff1a\u6211\u4eec\u4e0d\u5efa\u8bae\u60a8\u5728\u90e8\u7f72\u4ea7\u54c1\u540e\u8fd9\u6837\u505a\u3002"))}d.isMDXComponent=!0}}]);